# API Mystery

**API Mystery** - увлекательная детективная игра по раскрытию преступлений и тренажер по работе с **Web API, RPC, GraphQL**.

## Предисловие от автора

Всем привет! С самого первого момента, как я увидел [The SQL Murder Mystery](https://mystery.knightlab.com/), я не мог поверить, что не было продолжения или похожей игры с **Web API**-решением. Когда у меня появилось время, я решил создать такую игру, и **The API Mystery** родилась!

Игра состоит из нескольких независимых частей. В каждой из них вам предстоит разгадать детективную загадку и найти преступника. Вы играете за стажера-криминалиста по имени Апи. Единственные доступные вам инструменты - это API нескольких сервисов и, конечно же, ваша смекалка и дедукция!

## Установка и начало работы

Самый простой способ использовать предварительно подготовленный контейнер. Для этого у вас на компьютере должен быть установлен **Docker Desktop** или **docker-engine** и они должны быть прописаны в **path**. [Docker install](https://docs.docker.com/desktop/install/windows-install/)

Создайте папку. Перейдите в нее. Скачайте **docker-compose.yml** из GitHub и запустите контейнер.
Создайте папку. Перейдите в нее. Скачайте **docker-compose.yml**

```
mkdir APIMystery
cd APIMystery
wget https://github.com/SnoweTiger/APIMystery/blob/master/docker-compose.yml -O docker-compose.yml
docker-compose up -d
```

Сервер будет доступен по адресу **http://localhost:8080**. Проверьте доступность сервера вызвав в браузере **http://localhost:8080/ping** или выполнив в консоли

```
curl http://localhost:8080/ping
```

Сервер должен ответит статус 200 {"message":"pong"}

```
StatusCode        : 200
StatusDescription : OK
Content           : {"message":"pong"}
```

Откройте документацию **http://localhost:8080/docs**

## Часть 0: Погружение в чистый API

В городе N city ночью 29 октября 2025 года из накануне открытия музея кафедры Информационных технологий была разбита витрина и похищен талисман Золотой Гоффер. Полиция пытается найти преступника и похищенный талисман.

Вам как стажеру-криминалисту поручают расследование этого дела.
Требуется найти похитетеля и у кого находится Гоффер. Ваши доступы к служебному API выслан вам 30 октября 2025 личным сообщением в **Cakebook**. По завершению расследование передайте результат с помощью API суда. Желаем удачи!

### С чего начать

Как получить доступ к документации на Web API описано в [Установка и начало работы](#установка-и-начало-работы).

Так же 30 октября 2025 вам передали ключи для доступа к API местного финтнес центра и социальной сети **Cakebook** и ваш id пользователя:

```
GETFITNOW_API_TOKEN = 'd901050d-07ec-4990-a05c-ab2178e2e09c'
CAKEBOOK_API_TOKEN = 'd901050d-07ec-4990-a05c-ab2178e2e09c'
PERSON_ID = 12345
```

Используя токен от Cakebook API и зная когда и от кого было сообщение с доступами запросите сообщения. Можете использовать свой любимый инструмент для работы с Web API. Я рекомендую **Bruno** или **REST Client Extension** для VS Code Например с помощью REST Client:

```
POST http://localhost:8080/cakebook/api/events HTTP/1.1
Content-Type: application/json
Authorization: Bearer d901050d-07ec-4990-a05c-ab2178e2e09c

{
    "person_id": 12345,
    "start_date": 20251030,
    "end_date": 20251030
}
```

В ответ вы получите JSON, содержащий текст сообщения с доступами к служебному API (police/api/). Далее с помощью служебного API и зная дату совершения преступления получите отчет о преступлении и приступайте к расследованию.

### Как проверить результат расследования

Воспользуйтесь методом PATCH /police/api/report. Например для REST Client так:

```
PATCH http://localhost:8080/police/api/report HTTP/1.1
Content-Type: application/json
Authorization: Bearer d901050d
{
  "suspect_id": 12345,
  "suspect_name": "Api Fox",
  "report_id": 12346
}
```

В ответе судья сообщит правы ли вы.

# В будущих обновлениях (Дорожная карта)

1. Новые части
2. Больше детектива
3. Сюжетный режим
4. Загадки решаемые при помощи RPC и GraphQL
5. Загадки решаемые при помощи Web UI

# Copyright

Данный проект распространяется под лицензией [MIT](/LICENSE) @SnoweTiger 2024.
За основу данных проекта взята SQL база из [The Sql Murder Mystery](https://mystery.knightlab.com/)
под [Creative Commons CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/)
