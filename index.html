<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>The API Mystery</title>
</head>

<body>

    <ul class="nav nav-pills justify-content-end">
        <li class="nav-item">
            <a class="nav-link active" href="https://github.com/SnoweTiger/APIMystery">GitHub SnoweTiger/APIMystery</a>
        </li>
    </ul>

    <h1 class="text-center display-1 fw-bold">The API Mystery</h1>

    <div class="py-3 mt-5 text-center">    
        <div class="col-lg-8 mx-auto text-start">
            <p class="lead mt-2">
                <b>The API Mystery</b> - это увлекательная детективная игра, в которой вам предстоит раскрыть преступления и тренироваться в
                работе с <b>Web API, RPC и GraphQL</b>.
            </p>
            <p class="lead mt-2">
                В игре вы будете использовать эти технологии для взаимодействия с различными сервисами и программами, а также для
                получения необходимой информации для расследования. Вы будете отправлять запросы к <b>Web API</b>, использовать <b>RPC</b> для
                удаленного вызова процедур и работать с <b>GraphQL</b> для получения данных.
            </p>
        </div>
    </div>

    <div class="py-3 mt-3 text-center">
        <h2 class="display-6 fw-bold">Предисловие от автора</h2>
                
        <div class="col-lg-8 mx-auto text-start">
            <p class="lead mt-3">
                Приветствую всех! С самого начала, когда я увидел <a href="https://mystery.knightlab.com/">The SQL Murder Mystery</a>, я не мог
                поверить, что не существует продолжения или подобной игры с решением через Web API. Когда у меня наконец появилось
                свободное время, я решил создать такую игру, и вот родилась <b>The API Mystery!</b>
            </p>

            <p class="lead mt-3">
                Эта игра состоит из нескольких отдельных частей. В каждой из них вам предстоит разгадать детективную загадку и найти
                преступника. Вы играете за девушку криминалиста <b>Api Fox</b>.
                
            </p>

            <p class="lead mt-3">
                Данная игра направлена на развитие ваших навыков работы с <b>Web API</b> и требует активного использования вашей смекалки и
                дедукции. Будьте готовы к вызовам и наслаждайтесь процессом разгадывания загадок и поиска преступников!
            </p>
        </div>
    </div>

    <div class="py-3 mt-3 text-center">
        <h2 class="display-6 fw-bold">Установка и начало работы</h2>
        <div class="col-lg-8 mx-auto text-start">
            <p class="lead">
                Самый простой способ использовать предварительно подготовленный docker контейнер. Для этого, вам необходимо установить <b>Docker
                Desktop</b> или <b>docker-engine</b> на ваш компьютер и добавить их в переменную среды <b>path</b>. Вы можете найти инструкции по
                установке по ссылке <a href="https://docs.docker.com/desktop/install/windows-install/">Docker Desktop</a>. После установки Docker, выполните следующие шаги:
            </p>

            <ol class="lead">
                <li>Создайте новую папку на вашем компьютере.</li>
                <li>Перейдите в созданную папку.</li>
                <li>Скачайте файл <b>docker-compose.yml</b> из этого репозитория в папку.
                
                </li>
                <li>Запустите контейнер с помощью команды <b>docker-compose up -d</b></li>
            </ol>

            <p class="lead">
                Сервер будет доступен по адресу <a href="http://localhost:8080">http://localhost:8080</a>. 
                Чтобы проверить доступность сервера, вы можете ввести в браузере <a href="http://localhost:8080/ping">http://localhost:8080/ping</a> 
                или выполнив в консоли:
            </p>

            <pre class="mx-0 my-0 text-start">
                <code> 
                    curl http://localhost:8080/ping
                </code> 
            </pre>

            <p class="lead">Сервер ответит:</p>
            
            <pre class="mx-0 my-0 text-start">
                <code> 
                    StatusCode : 200
                    StatusDescription : OK
                    Content : {"message":"pong"}
                </code>
            </pre>

            <p class="lead">Документация к Web API будет доступна по адресу <a href="http://localhost:8080/docs">http://localhost:8080/docs</a></p>

            <p class="lead">Остановить и удалить контейнер можно следующей командой</p>

            <pre class="mx-0 my-0 text-start">
                <code> 
                    docker-compose down
                </code>
            </pre>
        </div>
    </div>

    <div class="py-3 mt-3 text-center">
        <h2 class="display-6 fw-bold">Часть 0: Погружение в чистый API</h2>
        <div class="col-lg-8 mx-auto text-start">
            <p class="lead">
                Вашему вниманию представляется дело о краже талисмана <b>Золотой Гоффер</b>, произошедшей в городе <b>N city ночью 29 октября 2025</b>
                года. Кража произошла из витрины музея кафедры Информационных технологий, накануне его открытия. Был похищен талисман
                Золотой Гоффер. Полиция уже ведет расследование и пытается найти преступника, а также установить, где находится
                похищенный талисман. Ваша задача, в качестве стажера-криминалиста, заключается в расследовании данного дела.
            </p>

            <p class="lead">
                Вам был выслан доступ к служебному API, который позволит вам получить дополнительную информацию для расследования.
                Доступы были отправлены вам <b>30 октября 2025</b> года личным сообщением в <b>Cakebook</b>.
            </p>

            <p class="lead">
                По завершении расследования вам необходимо будет передать результаты с помощью метода API 
                <b>PATCH /police/api/report</b>.
            </p>

            <p  class="lead">
                Удачи в расследовании!
            </p>
        </div>

        <h3 class="display-7 fw-bold">С чего начать</h3>
        <div class="col-lg-8 mx-auto text-start">
            <p class="lead">
                Как получить доступ к документации на Web API описано в <b>Установка и начало работы</b>.
            </p>

            <p class="lead">
                Так же вам передали ключи для доступа к API местного финтнес центра GetFitNow и социальной сети <b>Cakebook</b> и ваш id
                пользователя:
            </p>
            <pre class="mx-0 my-0 text-start">
                <code> 
                    GETFITNOW_API_TOKEN = 'd901050d-07ec-4990-a05c-ab2178e2e09c'
                    CAKEBOOK_API_TOKEN = 'd901050d-07ec-4990-a05c-ab2178e2e09c'
                    PERSON_ID = 12345
                </code>
            </pre>

            <p class="lead">
                Чтобы получить сообщения, используйте токен <b>CAKEBOOK_API_TOKEN</b>, для кого сообщение <b>PERSON_ID</b> и дату сообщения <b>20251030</b>,
                вам потребуется выполнить HTTP-запрос к соответствующему эндпоинту API. Вы можете использовать свой любимый инструмент
                для работы с веб-запросами, такой как <b>Bruno</b> или расширение <b>REST Client</b> для VS Code.
            </p>
            <p class="lead">
                Вот пример запроса с использованием расширения REST Client:
            </p>
            <pre class="mx-0 my-0 text-start">
                <code> 
                    POST http://localhost:8080/cakebook/api/events HTTP/1.1
                    Content-Type: application/json
                    Authorization: Bearer d901050d-07ec-4990-a05c-ab2178e2e09c
                    
                    {
                        "person_id": 12345,
                        "start_date": 20251030,
                        "end_date": 20251030
                    }
                </code>
            </pre>

            <p class="lead">
                В ответ вы получите JSON, содержащий сообщения от техподдержки с доступами к служебному API (police/api/).
            </p>

            <p class="lead">
                Далее с помощью служебного API и зная дату совершения преступления получите отчет о преступлении и приступайте к
                расследованию, метод <b>POST /police/api/report</b>.
            </p>
        </div>

        <h3 class="display-7 fw-bold">Как проверить результат расследования</h3>
        
        <div class="col-lg-8 mx-auto text-start">
            <p class="lead">
                Для проверки результатов расследования вы можете использовать метод <b>PATCH /police/api/report</b>. Например, с помощью REST
                Client вы можете отправить следующий запрос:
            </p>

            <pre class="mx-0 my-0 text-start">
                <code> 
                    PATCH http://localhost:8080/police/api/report HTTP/1.1
                    Content-Type: application/json
                    Authorization: Bearer d901050d

                    {
                        "suspect_id": 12345,
                        "suspect_name": "Api Fox",
                        "report_id": 12346
                    }
                </code>
            </pre>
            <p class="lead">
                В ответе судья сообщит правы ли вы.
            </p>
        </div>     

    </div>

    <div class="py-3 mt-3 text-center">
        <h2 class="display-6 fw-bold">В будущих обновлениях (Дорожная карта)</h2>
        <div class="col-lg-8 mx-auto text-start">
            <ol class="lead">
                <li>Новые части</li>
                <li>Больше детектива</li>
                <li>Сюжетный режим</li>
                <li>Загадки решаемые при помощи RPC и GraphQL</li>
                <li>Загадки решаемые при помощи Web UI</li>
            </ol>
        </div>
    </div>

    <div class="py-3 mt-3 text-center">
        <h2 class="display-6 fw-bold">Copyright</h2>

        <div class="col-lg-8 mx-auto text-start">
            <p class="lead">
                Данный проект распространяется под лицензией <a href="https://github.com/SnoweTiger/APIMystery/blob/7bd92af6e8d0885a63f14029a1185bd47773f9a4/LICENSE">MIT</a> @SnoweTiger 2024.</br>
                За основу данных проекта взята SQL база из <a href="https://mystery.knightlab.com/">The SQL Murder
                    Mystery</a>
                под <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons CC BY-SA 4.0</a>
            </p>
        </div>

    </div>

    <footer class="footer mt-auto py-3 bg-light">
        <div class="container">
            <span class="text-muted">&copy; 2024 <a href="https://t.me/SnoweTiger">SnoweTiger</a></span>
        </div>
    </footer>

</body>

</html>